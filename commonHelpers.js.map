{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst API_KEY = '44599145-181f37b758d0f90a33e2c7ba6';\nconst BASE_URL = 'https://pixabay.com/api/';\nexport async function fetchImages(query, page = 1) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page\n    };\n    try {\n        const response = await axios.get(BASE_URL, { params });\n        return response.data;\n    } catch (error) {\n        throw new Error('Failed to fetch images');\n    }\n}","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderGallery(images) {\n    const gallery = document.getElementById('gallery');\n    gallery.innerHTML = images.map(image => `\n        <li class=\"gallery-item\">\n        <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n            <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n            </a>\n            <div class=\"info\">\n                <div class=\"image-info\">\n                <b>Likes</b>\n                <p>${image.likes}</p>\n                </div>\n                <div class=\"image-info\">\n                <b>Views</b>\n                <p>${image.views}</p>\n                </div>\n                <div class=\"image-info\">\n                <b>Comments</b>\n                <p>${image.comments}</p>\n                </div>\n                <div class=\"image-info\">\n                <b>Downloads</b>\n                <p>${image.downloads}</p>\n                </div>\n            </div>\n        </a>\n        </li>\n    `).join('');\n}\n\nexport function clearGallery() {\n    document.getElementById('gallery').innerHTML = '';\n}\n\nexport function showNotification(message, type = 'info') {\n    iziToast[type]({\n        message,\n        position: 'topRight'\n    });\n}\n\nexport function showLoader() {\n    document.getElementById('loader').style.display = 'block';\n}\n\nexport function hideLoader() {\n    document.getElementById('loader').style.display = 'none';\n}\n\nexport function toggleLoadMoreButton(show) {\n    const loadMoreBtn = document.getElementById('load-more');\n    loadMoreBtn.style.display = show ? 'block' : 'none';\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery, clearGallery, showNotification, showLoader, hideLoader, toggleLoadMoreButton } from './js/render-functions.js';\nimport SimpleLightbox from 'simplelightbox';\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet lightbox;\nlet currentPage = 1;\nlet currentQuery = '';\n\ndocument.getElementById('search-form').addEventListener('submit', async (event) => {\n    event.preventDefault();\n    currentQuery = document.getElementById('query').value.trim();\n    if (currentQuery === '') {\n        showNotification('Please enter a search term', 'warning');\n        return;\n    }\n    currentPage = 1;\n    clearGallery();\n    toggleLoadMoreButton(false);\n    await loadImages();\n});\n\ndocument.getElementById('load-more').addEventListener('click', async () => {\n    currentPage += 1;\n    await loadImages();\n});\n\nasync function loadImages() {\n    showLoader();\n    try {\n        const data = await fetchImages(currentQuery, currentPage);\n        if (data.hits.length === 0 && currentPage === 1) {\n            showNotification('Sorry, there are no images matching your search query. Please try again!', 'error');\n        } else {\n            renderGallery(data.hits);\n            if (lightbox) {\n                lightbox.destroy();\n            }\n            lightbox = new SimpleLightbox('.gallery a');\n            lightbox.refresh();\n\n            toggleLoadMoreButton(currentPage * 15 < data.totalHits);\n\n            if (currentPage * 15 >= data.totalHits) {\n                showNotification(\"We're sorry, but you've reached the end of search results.\", 'info');\n            }\n\n            smoothScroll();\n        }\n    } catch (error) {\n        showNotification('An error occurred while fetching images', 'error');\n    } finally {\n        hideLoader();\n    }\n}\n\nfunction smoothScroll() {\n    const { height: cardHeight } = document.querySelector('.gallery').firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth'\n    });\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","page","params","axios","renderGallery","images","gallery","image","clearGallery","showNotification","message","type","iziToast","showLoader","hideLoader","toggleLoadMoreButton","show","loadMoreBtn","lightbox","currentPage","currentQuery","event","loadImages","data","SimpleLightbox","smoothScroll","cardHeight"],"mappings":"owBACA,MAAMA,EAAU,qCACVC,EAAW,2BACV,eAAeC,EAAYC,EAAOC,EAAO,EAAG,CAC/C,MAAMC,EAAS,CACX,IAAKL,EACL,EAAGG,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACR,EACI,GAAI,CAEA,OADiB,MAAME,EAAM,IAAIL,EAAU,CAAE,OAAAI,CAAM,CAAE,GACrC,IACnB,MAAe,CACZ,MAAM,IAAI,MAAM,wBAAwB,CAC3C,CACL,CChBO,SAASE,EAAcC,EAAQ,CAClC,MAAMC,EAAU,SAAS,eAAe,SAAS,EACjDA,EAAQ,UAAYD,EAAO,IAAIE,GAAS;AAAA;AAAA,mBAEzBA,EAAM,aAAa;AAAA,8CACQA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,qBAK/DA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,qBAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,qBAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,qBAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA;AAAA,KAK/B,EAAE,KAAK,EAAE,CACd,CAEO,SAASC,GAAe,CAC3B,SAAS,eAAe,SAAS,EAAE,UAAY,EACnD,CAEO,SAASC,EAAiBC,EAASC,EAAO,OAAQ,CACrDC,EAASD,CAAI,EAAE,CACX,QAAAD,EACA,SAAU,UAClB,CAAK,CACL,CAEO,SAASG,GAAa,CACzB,SAAS,eAAe,QAAQ,EAAE,MAAM,QAAU,OACtD,CAEO,SAASC,GAAa,CACzB,SAAS,eAAe,QAAQ,EAAE,MAAM,QAAU,MACtD,CAEO,SAASC,EAAqBC,EAAM,CACvC,MAAMC,EAAc,SAAS,eAAe,WAAW,EACvDA,EAAY,MAAM,QAAUD,EAAO,QAAU,MACjD,CClDA,IAAIE,EACAC,EAAc,EACdC,EAAe,GAEnB,SAAS,eAAe,aAAa,EAAE,iBAAiB,SAAU,MAAOC,GAAU,CAG/E,GAFAA,EAAM,eAAc,EACpBD,EAAe,SAAS,eAAe,OAAO,EAAE,MAAM,OAClDA,IAAiB,GAAI,CACrBX,EAAiB,6BAA8B,SAAS,EACxD,MACH,CACDU,EAAc,EACdX,IACAO,EAAqB,EAAK,EAC1B,MAAMO,EAAU,CACpB,CAAC,EAED,SAAS,eAAe,WAAW,EAAE,iBAAiB,QAAS,SAAY,CACvEH,GAAe,EACf,MAAMG,EAAU,CACpB,CAAC,EAED,eAAeA,GAAa,CACxBT,IACA,GAAI,CACA,MAAMU,EAAO,MAAMxB,EAAYqB,EAAcD,CAAW,EACpDI,EAAK,KAAK,SAAW,GAAKJ,IAAgB,EAC1CV,EAAiB,2EAA4E,OAAO,GAEpGL,EAAcmB,EAAK,IAAI,EACnBL,GACAA,EAAS,QAAO,EAEpBA,EAAW,IAAIM,EAAe,YAAY,EAC1CN,EAAS,QAAO,EAEhBH,EAAqBI,EAAc,GAAKI,EAAK,SAAS,EAElDJ,EAAc,IAAMI,EAAK,WACzBd,EAAiB,6DAA8D,MAAM,EAGzFgB,IAEP,MAAe,CACZhB,EAAiB,0CAA2C,OAAO,CAC3E,QAAc,CACNK,GACH,CACL,CAEA,SAASW,GAAe,CACpB,KAAM,CAAE,OAAQC,CAAU,EAAK,SAAS,cAAc,UAAU,EAAE,kBAAkB,wBACpF,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAK,CACL"}